---
lang: bg
---

\pagenumbering{arabic}



# Предговор

Arch Linux е дистрибуция, която не се опитва да улесни потребителя чрез скриване на детайли. Тя залага на прозрачност, простота и контрол. „Просто“ в този контекст означава без излишни добавки, модификации или усложнения — накратко, елегантен и минималистичен подход.
Системата Arch Linux се изгражда от потребителя, директно от обвивката (shell-а), използвайки основни инструменти от команден ред (CLI = Command Line Interface). 
Това е The Arch Way.
За разлика от други дистрибуции с инсталатори, тук няма предварително избрана среда или конфигурация. От командния ред ще добавяме пакети от Arch хранилищата (repositories) чрез инструмента *pacman* (пакетният мениджър на Arch - бърз, написан на C, лек и ефективен), използвайки интернет връзка, и ръчно ще конфигурираме системата, като редактираме текстови файлове, докато тя напълно отговаря на нашите изисквания.
Също така ще добавяме ръчно потребители (различни от root) и ще управляваме групи и права за достъп. Този подход осигурява максимална гъвкавост, избор и контрол върху системните ресурси още от самата основа.
Arch Linux е насочен към компетентни GNU/Linux потребители, които желаят директен контрол над машината си.
Тази книга има за цел да въведе читателя в Arch Linux по ясен, структуриран и практичен начин, без да изисква предварителен опит с дистрибуцията.

___
## Как да използваш тази книга

Книгата е разделена на логически части.
Препоръчително е да се чете последователно, особено при първа инсталация.

## Философията на Arch Linux

Arch Linux следва принципа KISS (Keep It Simple, Stupid).
Това означава минимализъм, ясна архитектура и липса на излишни автоматизации.

# ЧАСТ I – Инсталация на Arch Linux

## Инсталация на Arch Linux

### 1. Защо инсталацията на Arch е различна

Arch Linux не предоставя графичен инсталатор по подразбиране.  
Това решение не е пропуск, а **съзнателен избор**, произтичащ от философията на дистрибуцията.

Целта на Arch Linux е потребителят:

- да разбира как е изградена системата;
    
- да контролира всяка съществена стъпка;
    
- да инсталира **само това, което реално му е необходимо**.
    

Инсталационният процес е ръчен, но **не е сложен**, когато се следва логически.  
В тази част ще изградим работеща система от нулата, като всяка стъпка е обяснена в контекст.

___

### 2. Стартиране на live средата

След стартиране от инсталационния ISO образ, Arch Linux предоставя минимална live среда, базирана изцяло на команден ред.  
Тази среда вече съдържа всички инструменти, необходими за инсталацията.

Преди да продължим, е важно да се уверим, че системата е стартирана в правилния режим.

___

### 3. Проверка на boot режима (UEFI / Legacy)

Boot режимът определя начина, по който системата ще стартира след инсталацията.

```bash
ls /sys/firmware/efi
```


- ако директорията съществува → системата работи в **UEFI режим**
    
- ако не съществува → **Legacy BIOS**
    

В това ръководство се използва **UEFI**, тъй като:

- е съвременният стандарт;
    
- предлага по-чиста boot конфигурация;
    
- работи по-добре с модерни системи и NVMe устройства.
    

___

### 4. Мрежова свързаност

Arch Linux не може да бъде инсталиран без интернет връзка, тъй като всички пакети се изтеглят от официалните хранилища (репозиторита).

#### 4.1 Кабелна мрежа

При Ethernet връзка мрежата обикновено е активна автоматично.  
Проверката става с проста заявка:

```bash
ping -c 3 archlinux.org
```

Ако има отговор, мрежата е готова за използване.

___

#### 4.2 Безжична мрежа (Wi-Fi)

За Wi-Fi се използва инструментът `iwctl`, част от проекта _iwd_.

```bash
iwctl
```

В интерактивната среда:

```bash
device list 
station wlan0 scan 
station wlan0 get-networks 
station wlan0 connect ИМЕ_НА_МРЕЖАТА
```

След успешна връзка:

```bash
exit
```

Отново се уверяваме, че има достъп до интернет:

```bash
ping -c 3 archlinux.org
```

___

### 5. Системен часовник

Точният часовник е важен за:

- SSL сертификати;
    
- синхронизация на пакети;
    
- коректна работа на системни услуги.
    

Активира се автоматична синхронизация:

```bash
timedatectl set-ntp true
```

___

### 6. Подготовка на диска

Преди да създадем дялове, трябва да идентифицираме наличните устройства.

```bash
lsblk
```

Типични примери:

- `/dev/sda` – SATA диск
    
- `/dev/nvme0n1` – NVMe SSD
    

___

#### 6.1 Примерна схема за UEFI система

| Дял  | Размер  | Тип   | Предназначение  |
| ---- | ------- | ----- | --------------- |
| EFI  | 512 MB  | FAT32 | boot            |
| swap | 2–8 GB  | swap  | виртуална памет |
| root | остатък | ext4  | основна система |

Тази схема е проста, надеждна и подходяща за повечето потребители.

___

#### 6.2 Създаване на дялове
```bash

cfdisk /dev/sdX

```


Избира се:

- **GPT** таблица
    
- създават се дяловете
    
- промените се записват
    

___

### 7. Форматиране на дяловете

### 7.1 Вариант с EXT4 

EXT4 е най-използваната в линукс файлова система, надеждна и функционална

```bash
mkfs.fat -F32 /dev/sdX1 
mkfs.ext4 /dev/sdX3 
mkswap /dev/sdX2 
swapon /dev/sdX2
```


### 7.2  Вариант с BTRFS

BTRFS е по-модерна файлова система с фокус върху отказоустйчивост, поправка и лесно администриране.

```bash
mkfs.fat -F32 /dev/sdX1
mkfs.btrfs -f /dev/sdX3
mkswap /dev/sdX2
swapon /dev/sdX2
```
На този етап дяловете са готови за монтиране.

___

### 8. Монтиране на файловата система

### 8.1 (EXT4)

```bash
mount /dev/sdX3 /mnt 
mkdir -p /mnt/boot 
mount /dev/sdX1 /mnt/boot
```

### 8.2 (BTRFS)

Създаване на subvolumes
```bash
mount /dev/sdX3 /mnt

btrfs subvolume create /mnt/@

btrfs subvolume create /mnt/@home

umount /mnt
```

Монтиране:
```bash
mount -o noatime,compress=zstd,subvol=@ /dev/sdX3 /mnt

mkdir /mnt/{boot,home}

mount -o noatime,compress=zstd,subvol=@home /dev/sdX3 /mnt/home

mount /dev/sdX1 /mnt/boot
```

Тук се изгражда бъдещата структура на системата.

___

### 9. Инсталиране на базовата система

```bash
pacstrap /mnt base linux linux-firmware vim networkmanager
```

Командата `pacstrap`:

- копира базовите пакети;
    
- инсталира ядрото;
    
- подготвя минимална, но напълно функционална система.
    

___

### 10. fstab (таблица на файловата система) и преминаване към новата система (chroot)

```bash
genfstab -U /mnt >> /mnt/etc/fstab 
arch-chroot /mnt
```

Първата команда записва монтираните по-рано дялове във файл, за да автоматизираме процеса. 
След въвеждането на втората ще забелжим промяна в shell prompt-а, защото от този момент нататък работим ***вътре в новоинсталирания Arch Linux***.

___

# ЧАСТ II – Конфигурация на системата

## Конфигурация на системата

След инсталирането на базовата система, Arch Linux все още представлява минимална среда, която не е готова за самостоятелна работа.  
Целта на тази част е да превърне инсталираната система в **функционален, стабилен и предсказуем Linux**, способен да стартира без инсталационния носител и да бъде използван ежедневно.

___

## 1. Часова зона и системен часовник

Linux системите използват комбинация от системен и хардуерен часовник.  
Неправилната конфигурация често води до проблеми със сертификати, логове и мрежови услуги.

### 1.1 Задаване на часова зона

```bash
ln -sf /usr/share/zoneinfo/Europe/Sofia /etc/localtime
```

Тази команда създава символна връзка към съответната зона, вместо да копира файлове.  
Това е стандартният и препоръчителен подход.

___

### 1.2 Синхронизация на хардуерния часовник

```bash
hwclock --systohc
```

Тази операция записва текущото системно време в хардуерния часовник.

___

## 2. Локализация (Locales)

Locales определят езика на системните съобщения, формата на датите, числата и други регионални настройки.

### 2.1 Генериране на наличните locales

Отвори конфигурационния файл:

```bash
vim /etc/locale.gen
```

Разкоментирай следните редове:

```bash
en_US.UTF-8 UTF-8 
bg_BG.UTF-8 UTF-8
```

След това генерирай locale файловете:

```bash
locale-gen
```

___

### 2.2 Задаване на системен език

Създай или редактирай файла:

```bash
vim /etc/locale.conf
```

Примерна конфигурация:

```bash
LANG=en_US.UTF-8
```

Използването на английски език за системата улеснява диагностицирането на проблеми и съвпада с документацията на Arch Wiki.

___

## 3. Клавиатурна подредба в конзолата

Настройката засяга **само текстовия режим (TTY)**.

```bash
vim /etc/vconsole.conf
```

```bash
KEYMAP=us
```

Промяната към българска подредба обикновено се прави на ниво графична среда.

___

## 4. Име на системата (hostname)

### 4.1 Задаване на hostname

```bash
vim /etc/hostname
```

Пример:

```bash
archlinux
```

___

### 4.2 Конфигурация на /etc/hosts

```bash
vim /etc/hosts
```

```bash
127.0.0.1   localhost 
::1         localhost 
127.0.1.1   archlinux.localdomain archlinux
```

Тази конфигурация е важна за правилната работа на мрежови и локални услуги.

___

## 5. Мрежова конфигурация

Arch Linux не активира мрежови услуги автоматично.

### 5.1 NetworkManager

```bash
pacman -S networkmanager network-manager-applet
systemctl enable NetworkManager
```

NetworkManager предоставя универсален начин за управление на мрежата както в конзолата, така и в графична среда.

___

## 6. Initramfs

Initramfs представлява минимална среда, която се зарежда преди основната система.

```bash
mkinitcpio -P
```

В стандартна инсталация не е необходима допълнителна конфигурация.

___

## 7. Root парола

```bash
passwd
```

Root акаунтът е административният потребител и трябва да има силна парола.

___

## 8. Създаване на обикновен потребител

Работата като root не е препоръчителна за ежедневни задачи.

```bash
useradd -m -G wheel -s /bin/bash име-на-потребител
passwd име-на-потребител
```

___

## 9. sudo

sudo позволява на обикновен потребител да изпълнява административни команди.

```bash
pacman -S sudo 
EDITOR=vim visudo
```

Разкоментирай реда:

```bash
%wheel ALL=(ALL:ALL) ALL
```

___

## 10. Boot процес и bootloader-и 

Bootloader-ът отговаря за зареждането на ядрото. Инсталира се в EFI партишън-а

### 10.1 Systemd-boot

Инсталиране

```bash
bootctl install
```
Конфигурация

```bash
vim /boot/loader/loader.conf
```
```bash
default arch.conf

timeout 3

editor no
```
```bash
vim /boot/loader/entries/arch.conf
```
```bash
title Arch Linux

linux /vmlinuz-linux

initrd /initramfs-linux.img

options root=PARTUUID=XXXX rw
```

___

### 10.2 GRUB

Инсталиране


```bash
pacman -S grub efibootmgr
```

Конфигурацията на GRUB e автоматична

```bash
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB

grub-mkconfig -o /boot/grub/grub.cfg
```

___

### 10.3 rEFInd

Инсталиране

```bash
pacman -S refind

refind-install
```

Конфигурация

```bash
vim /boot/EFI/refind/refind.conf
```

```bash
timeout 3

scanfor internal,external,manual
```

rEFInd автоматично открива инсталираните операционни системи

___

### 10.4 Limine

Инсталиране

```bash
pacman -S limine

limine-install /dev/sdX
```

Конфигурация

```bash
vim /boot/limine.conf
```

```bash
TIMEOUT=3

:Arch Linux
PROTOCOL=linux
KERNEL_PATH=boot:///vmlinuz-linux
INITRD_PATH=boot:///initramfs-linux.img
CMDLINE=root=PARTUUID=XXXX rw
```

PARTUUID може да бъде намерен с:

```bash
blkid
```

___

## 11. Завършване на конфигурацията

Излизане от chroot средата:

```bash
exit
```

Демонтиране и рестарт:

```bash
umount -R /mnt 
reboot
```

След рестарта системата трябва да стартира директно от диска.

# ЧАСТ III – Графични среди

## Графични среди в Arch Linux

След завършване на базовата инсталация и конфигурация, Arch Linux работи изцяло в текстов режим.  
Това е **нормално и очаквано** поведение. Графичната среда **не е част от системата по подразбиране**, а съзнателен избор на потребителя.

Тази част има за цел да обясни:

- какво представлява графичната среда в Linux;
    
- какви са основните варианти;
    
- как да избереш подходящата за твоите нужди;
    
- как да я инсталираш коректно в Arch Linux.
    

___

## 1. Какво е графична среда

В Linux графичната среда не е едно цяло, а комбинация от няколко слоя:

1. **Display server** – Xorg или Wayland
    
2. **Window manager** – управлява прозорците
    
3. **Desktop Environment (DE)** – цялостна работна среда
    
4. **Display manager** – login екран (по избор)
    

И тук Arch Linux не налага избор.  
Това означава **пълна свобода**, но и **пълна отговорност**.

___

## 2. Display servers: Xorg и Wayland

### 2.1 Xorg

Xorg е класическият display server в Linux.  
Той е:

- широко поддържан;
    
- стабилен;
    
- съвместим с почти всички приложения.
    

Недостатъци:

- остаряла архитектура;
    
- по-сложна конфигурация;
    
- по-слаба сигурност в сравнение с Wayland.
    

Въпреки това Xorg остава **напълно валиден избор**, особено за по-стари системи или специфичен софтуер.

___

### 2.2 Wayland

Wayland е модерна алтернатива на Xorg.  
Той предлага:

- по-добра сигурност;
    
- по-ниска латентност;
    
- по-чиста архитектура.
    

Недостатъкът е, че не всички приложения са напълно адаптирани, въпреки че поддръжката непрекъснато се подобрява.

___

## 3. Desktop Environments (DE)

Desktop Environment предоставя цялостно потребителско изживяване:

- прозорци;
    
- панели;
    
- настройки;
    
- системни инструменти.
    

___

### 3.1 KDE Plasma

KDE Plasma е мощна и силно конфигурируема графична среда.

Характеристики:

- богати настройки;
    
- модерен интерфейс;
    
- подходяща както за начинаещи, така и за напреднали.
    

Инсталация:

```bash
pacman -S plasma kde-applications sddm 
systemctl enable sddm
```

___

### 3.2 GNOME

GNOME предлага минималистичен и фокусиран интерфейс.

Характеристики:

- ясно потребителско изживяване;
    
- силна интеграция;
    
- по-малко възможности за дълбока персонализация без extensions.
    

Инсталация:

```bash
pacman -S gnome gnome-extra gdm 
systemctl enable gdm
```

___

### 3.3 XFCE

XFCE е лека и стабилна графична среда.

Подходяща за:

- по-стари машини;
    
- потребители, които ценят простотата.
    

Инсталация:

```bash
pacman -S xfce4 xfce4-goodies lightdm lightdm-gtk-greeter 
systemctl enable lightdm
```

___

## 4. Window Managers

Window Manager управлява прозорците, без да предоставя пълна desktop среда.

Този подход е предпочитан от напреднали потребители.

___

### 4.1 i3

i3 е tiling window manager с клавиатурно управление.

Характеристики:

- висока ефективност;
    
- минимализъм;
    
- конфигурация чрез текстов файл.
    

Инсталация:

```bash
pacman -S i3-wm i3status dmenu xterm
```

___

### 4.2 Hyprland

Hyprland е модерен Wayland compositor с динамично tiling поведение.

Характеристики:

- Wayland-native;
    
- визуални ефекти;
    
- подходящ за съвременни системи.
    

Инсталация:

```bash
pacman -S hyprland wayland xdg-desktop-portal-hyprland
```

___

## 5. Display Managers (Login)

Display manager предоставя графичен екран за вход в системата.

Най-често използвани:

- **sddm** – KDE, Hyprland
    
- **gdm** – GNOME
    
- **lightdm** – универсален
    

Използването му не е задължително, но улеснява работата.

___

## 6. Първо стартиране

След инсталацията на графичната среда, системата се рестартира:

```bash
reboot
```

Ако display manager е активиран, ще се появи графичен login екран.  
В противен случай графичната среда може да бъде стартирана ръчно чрез `startx` (Xorg).


# ЧАСТ IV – Основни команди и работа със системата

## Основни команди и работа със системата

След инсталацията и конфигурацията на Arch Linux, ежедневната работа със системата се извършва основно чрез терминала.  
Това не е ограничение, а **една от най-силните страни на Linux** — прозрачност, предсказуемост и пълен контрол.

Целта на тази част не е да изброи всички възможни команди, а да изгради **практическо разбиране** за най-често използваните инструменти.

___

## 1. Управление на пакети с pacman

`pacman` е пакетният мениджър на Arch Linux.  
Той е бърз, опростен и следва философията на дистрибуцията — минимализъм без излишни абстракции.

### 1.1 Инсталиране на пакети

```bash
pacman -S име-на-пакета
```

Тази команда изтегля и инсталира пакет от официалните репозиторита, заедно с необходимите зависимости.

___

### 1.2 Премахване на пакети

```bash
pacman -R име-на-пакета
```

За премахване заедно с неизползвани зависимости:

```bash
pacman -Rns име-на-пакета
```

___

### 1.3 Обновяване на системата

```bash
pacman -Syu
```

Arch Linux е rolling release дистрибуция.  
Това означава, че **редовното обновяване е задължително**, за да се избегнат проблеми със зависимости.

___

### 1.4 Търсене на пакети

```bash
pacman -Ss ключова-дума
```

___

## 2. Услуги и systemctl

Arch Linux използва **systemd** за управление на услуги и boot процеса.

### 2.1 Проверка на статус

```bash
systemctl status име-на-услуга
```

___

### 2.2 Стартиране и спиране

```bash
systemctl start име-на-услуга 
systemctl stop име-на-услуга
```

___

### 2.3 Активиране при boot

```bash
systemctl enable име-на-услуга
```

Това създава символна връзка, която указва услугата да стартира автоматично.

___

## 3. Файлова система и навигация

Работата с файловата система е основно умение в Linux.

### 3.1 Основни команди

```bash
ls 
cd 
pwd
```

- `ls` – списък на файлове
    
- `cd` – смяна на директория
    
- `pwd` – текуща директория
    

___

### 3.2 Копиране, преместване и изтриване

```bash
cp source destination 
mv source destination 
rm file
```

За директории:

```bash
rm -r directory
```

___

### 3.3 Права и собственост

Linux използва модел за права на достъп, базиран на потребители и групи.

```bash
chmod 755 file 
chown user:group file
```

___

## 4. Мрежови инструменти

### 4.1 IP информация

```bash
ip a
```

___

### 4.2 Проверка на връзка

```bash
ping archlinux.org
```

___

### 4.3 SSH

SSH позволява отдалечен достъп до системата.

```bash
ssh user@host
```

___

## 5. Логове и диагностика

### 5.1 journalctl

`journalctl` предоставя достъп до системните логове.

```bash
journalctl -xe
```

За логове на конкретна услуга:

```bash
journalctl -u service
```

___

## 6. Работа като root и добри практики

Arch Linux не ограничава достъпа на root, но **отговорността е на потребителя**.

Добри практики:

- използвай `sudo` вместо директен root login;
    
- чети съобщенията на pacman;
    
- не игнорирай конфликти при обновяване.
    

___



# ПРИЛОЖЕНИЕ A

## Arch User Repository (AUR)

Arch User Repository (AUR) е общностно поддържано хранилище, което съдържа PKGBUILD файлове за софтуер, който не е част от официалните репозиторита.

Важно е да се разбере ясно:

> **AUR не съдържа бинарни пакети.**  
> Потребителят сам компилира и инсталира софтуера локално.

Това е в пълно съответствие с философията на Arch Linux.

___

## 1. Какво е PKGBUILD

PKGBUILD е Bash скрипт, който описва:

- откъде се изтегля изходният код;
    
- как се компилира;
    
- как се инсталира пакетът.
    

Преди инсталиране от AUR **PKGBUILD винаги трябва да се преглежда**.

___

## 2. Ръчна инсталация от AUR

### 2.1 Подготовка

```bash
pacman -S base-devel git
```

___

### 2.2 Изтегляне и инсталация

```bash
git clone https://aur.archlinux.org/package-name.git 
cd package-name 
makepkg -si
```

Този процес:

- компилира пакета;
    
- създава локален `.pkg.tar.zst`;
    
- инсталира го чрез pacman.
    

___

## 3. AUR helpers

AUR helper е инструмент, който автоматизира горния процес.

### Най-популярни:

- `yay`
    
- `paru`
    

### Пример (yay):

```bash
git clone https://aur.archlinux.org/yay.git 
cd yay 
makepkg -si
```

След това:

```bash
yay -S package-name
```

 **Важно:**  
Използването на AUR helper **не отменя отговорността** да се проверява какво се инсталира.

___

## 4. Добри практики при AUR

- не използвай AUR като основен източник;
    
- обновявай редовно;
    
- чети коментарите в AUR страницата;
    
- избягвай изоставени пакети.
    

___

# ПРИЛОЖЕНИЕ B

## System Maintenance в Arch Linux

Arch Linux изисква **активна поддръжка**, но не и сложна.

___

## 1. Редовно обновяване

```bash
pacman -Syu --noconfirm --needed
```

Препоръчително:

- веднъж седмично;
    
- винаги да се чете output-а.
    

___

## 2. Arch News

Преди големи обновявания:

- проверявай Arch Linux News;
    
- следвай указанията при breaking changes.
    

___

## 3. Почистване на кеша

```bash
pacman -Sc
```

За пълно почистване (внимателно):

```bash
pacman -Scc
```

___

## 4. Проверка за осиротели пакети

```bash
pacman -Qtdq
```

Премахване:

```bash
pacman -Rns $(pacman -Qtdq)
```

___

## 5. Проверка на услуги

```bash
systemctl --failed
```

___

## 6. Логове

```bash
journalctl -p 3 -xb
```

Това показва **критични грешки** от последния boot.

___

# ПРИЛОЖЕНИЕ C

## Btrfs snapshots и Timeshift

### 1. Защо snapshots са важни за Arch Linux

Arch Linux е rolling-release дистрибуция. Честите обновявания носят нови версии, но и потенциален риск.  
Btrfs snapshots решават този проблем елегантно.

Snapshots позволяват:

- мигновено запазване на състоянието на системата;
    
- връщане назад при неуспешен update;
    
- безопасно експериментиране.
    

___

### 2. Предпоставки

- Root файлова система върху **Btrfs**;
    
- subvolume `@` монтиран като `/`;
    
- subvolume `@home` монтиран като `/home`.
    

Това е стандартната и препоръчителна схема за Arch Linux.

___

### 3. Инсталиране на Timeshift

```bash
pacman -S timeshift
```


Timeshift поддържа два режима: `rsync` и `btrfs`.  
За Arch Linux **задължително** използваме Btrfs режим.

___

### 4. Първоначална конфигурация

```bash
timeshift-launcher
```


Избор:

- Snapshot type: **BTRFS**
    
- Snapshot location: автоматично
    

Timeshift автоматично открива Btrfs subvolume-ите.

___

### 5. Какво съдържат snapshot-ите

Включват:

- `/` (root filesystem);
    
- `/etc`;
    
- инсталирани пакети и конфигурации.
    

Не включват:

- `/home` (по дизайн).
    

Това е правилно поведение. Личните данни изискват отделен backup.

___

### 6. Автоматични snapshots

Препоръчителни настройки:

- Daily: 3
    
- Weekly: 2
    
- Monthly: 0
    

Snapshots са copy-on-write и заемат минимално пространство.

___

### 7. Възстановяване (rollback)

#### 7.1 От работеща система

```bash
timeshift --restore
```


#### 7.2 От live ISO

```bash
mount -o subvol=@ /dev/sdX3 /mnt
arch-chroot /mnt
timeshift --restore
```


След рестарт системата се връща в избраното състояние.

___

### 8. Timeshift не е backup

Snapshots защитават **системата**, но не и данните.  
Backup на `/home` е задължителен.



___


# ПРИЛОЖЕНИЕ D

## Backups и възстановяване

Backup стратегията **не е опция**, а необходимост.

___

## 1. Какво да се backup-ва

Минимум:

- `/home`
    
- `/etc`
    
- списък с инсталирани пакети
    

```bash
pacman -Qqe > pkglist.txt
```

___

## 2. rsync (препоръчително)

```bash
rsync -aAXv /home /mnt/backup/
```

Опции:

- `-a` – архивен режим
    
- `-A` – ACL
    
- `-X` – extended attributes
    

___

## 3. Timeshift (snapshot подход)

Подходящ за:

- system rollback;
    
- защита при обновявания.
    

```bash
pacman -S timeshift
```

Timeshift **не заменя backup на лични данни**.

___

# ПРИЛОЖЕНИЕ Е

## UEFI Secure Boot

### 1. Какво представлява Secure Boot

Secure Boot е част от UEFI стандарта и гарантира, че по време на boot процеса се изпълнява само доверен код.

По подразбиране:

- системите използват Microsoft ключове;
    
- custom kernel-и и bootloader-и се блокират.
    

Arch Linux позволява **пълен контрол върху ключовете**.

___

### 2. Подходи за Secure Boot

#### 2.1 Secure Boot изключен

- най-простият вариант;
    
- напълно валиден за повечето потребители.
    

#### 2.2 Secure Boot със собствени ключове (препоръчително)

- пълен контрол;
    
- висока сигурност;
    
- съвместимост с Arch философията.
    

___

### 3. Инструментът sbctl

`sbctl` е официалният Arch инструмент за управление на Secure Boot.

Инсталация:

```bash
pacman -S sbctl
```

Проверка на статуса:
```
sbctl status
```

___

### 4. Генериране и запис на ключове

Системата трябва да е в **Setup Mode**, а Secure Boot временно изключен.


```bash
sbctl create-keys

sbctl enroll-keys
```
___

### 5. Подписване на boot компоненти

### systemd-boot

```bash
sbctl sign /boot/EFI/systemd/systemd-bootx64.efi

sbctl sign /boot/vmlinuz-linux
```


### GRUB

```bash
sbctl sign /boot/EFI/GRUB/grubx64.efi

sbctl sign /boot/vmlinuz-linux
```

___

### 6. Автоматично подписване

```bash
sbctl enable-autosign
```

Това предотвратява счупване на boot-а при kernel update.

___

### 7. Активиране на Secure Boot

След подписване:

- влез в UEFI/BIOS;
    
- активирай Secure Boot;
    
- рестартирай системата.
    

Ако подписите са коректни, Arch Linux ще стартира нормално.

___

### 8. Secure Boot + Btrfs + Timeshift

Комбинацията от:

- Secure Boot;
    
- Btrfs snapshots;
    
- Timeshift
    

осигурява:

- защитен boot процес;
    
- възможност за rollback;
    
- стабилност при rolling updates.

___


# Лиценз

MIT License

Copyright (c) 2025  
 momospc, Monkhster, (Momchil Vlaev)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
